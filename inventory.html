<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SupplyChain Intelligence · Inventory Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #020617;
      --card: #0f172a;
      --soft: #111827;
      --accent: #38bdf8;
      --accent2: #22c55e;
      --danger: #fb7185;
      --text: #e5e7eb;
      --text-soft: #9ca3af;
      --radius: 18px;
      --radius-sm: 10px;
      --font: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #020617 0, #000 60%);
      color: var(--text);
      font-family: var(--font);
      display: flex;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 1100px;
      padding: 18px 16px 40px;
    }

    /* NAV (same style as index) */
    .nav {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 18px;
    }

    .nav-logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .nav-logo-badge {
      width: 40px;
      height: 40px;
      border-radius: 14px;
      background: conic-gradient(from 180deg, #38bdf8, #a855f7, #f97316, #38bdf8);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 18px rgba(56,189,248,0.7);
    }

    .nav-logo-inner {
      width: 32px;
      height: 32px;
      border-radius: 12px;
      background: radial-gradient(circle at 30% 0, #e5e7eb, #020617);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .nav-title {
      font-size: 18px;
      font-weight: 650;
    }

    .nav-sub {
      font-size: 11px;
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    .nav-links {
      margin-left: auto;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 12px;
    }

    .nav-links a {
      color: var(--text-soft);
      text-decoration: none;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(15,23,42,0.85);
      border: 1px solid #1f2937;
    }

    .nav-links a.active {
      border-color: var(--accent);
      color: var(--accent);
    }

    h1 {
      font-size: 26px;
      margin-top: 4px;
      background: linear-gradient(to right, #38bdf8, #a855f7);
      -webkit-background-clip: text;
      color: transparent;
    }

    .subtitle {
      margin-top: 6px;
      font-size: 14px;
      color: var(--text-soft);
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 1.3fr 1fr;
      gap: 14px;
      margin-top: 20px;
    }

    @media (max-width: 900px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 14px 16px 16px;
      border: 1px solid #1f2937;
    }

    .card-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    select, input {
      width: 100%;
      margin-top: 6px;
      padding: 8px 9px;
      border-radius: var(--radius-sm);
      border: 1px solid #1f2937;
      background: var(--soft);
      color: var(--text);
      font-size: 13px;
    }

    table {
      width: 100%;
      margin-top: 10px;
      border-collapse: collapse;
      font-size: 11px;
    }

    th, td {
      border-bottom: 1px solid #1f2937;
      padding: 6px 6px;
      text-align: right;
      white-space: nowrap;
    }

    th {
      color: var(--text-soft);
      font-weight: 600;
      text-align: right;
    }

    th:first-child, td:first-child { text-align: left; }

    tbody tr:nth-child(even) {
      background: #020617;
    }

    .kpi {
      background: var(--soft);
      padding: 8px 10px;
      border-radius: var(--radius-sm);
      border: 1px solid #1f2937;
      margin-top: 8px;
      font-size: 12px;
    }

    .kpi-label {
      color: var(--text-soft);
    }

    .kpi-value {
      font-weight: 600;
      margin-top: 2px;
    }

    .tag {
      display: inline-block;
      margin-top: 5px;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
    }

    .green { background: rgba(34,197,94,0.18); color: #bbf7d0; }
    .yellow { background: rgba(250,204,21,0.18); color: #fef9c3; }
    .red   { background: rgba(248,113,113,0.2); color: #fee2e2; }

    .note {
      margin-top: 8px;
      font-size: 11px;
      color: var(--text-soft);
      line-height: 1.5;
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- NAVBAR -->
    <header class="nav">
      <div class="nav-logo">
        <div class="nav-logo-badge">
          <div class="nav-logo-inner">SC</div>
        </div>
        <div>
          <div class="nav-title">SupplyChain Intelligence App</div>
          <div class="nav-sub">Inventory · Risk · Network</div>
        </div>
      </div>
      <nav class="nav-links">
        <a href="index.html">Dashboard</a>
        <a href="inventory.html" class="active">Inventory</a>
        <a href="map.html">Logistics Map</a>
        <a href="simulation.html">Simulation</a>
        <a href="risk.html">Risk</a>
        <a href="abc.html">ABC</a>
      </nav>
    </header>

    <h1>Multi-SKU Inventory Manager</h1>
    <p class="subtitle">
      EOQ, reorder point and safety stock per SKU, using real supply chain formulas.
    </p>

    <div class="grid-2">
      <!-- LEFT: TABLE + DROPDOWN -->
      <section class="card">
        <div class="card-title">SKU Portfolio</div>
        <label for="skuSelect" style="font-size:13px; color:var(--text-soft);">
          Select a SKU to analyze
        </label>
        <select id="skuSelect"></select>

        <table>
          <thead>
            <tr>
              <th>SKU</th>
              <th>Name</th>
              <th>Annual D</th>
              <th>Unit Cost</th>
              <th>Order Cost</th>
              <th>Hold %</th>
              <th>LT (days)</th>
              <th>σ (daily)</th>
            </tr>
          </thead>
          <tbody id="skuTableBody"></tbody>
        </table>

        <p class="note">
          All parameters are hard-coded sample data that could be loaded from an ERP/WMS in a real implementation.
        </p>
      </section>

      <!-- RIGHT: CALCULATIONS -->
      <section class="card" id="detailsCard">
        <div class="card-title">Inventory Policy & Risk for Selected SKU</div>
        <div class="kpi">
          <div class="kpi-label">SKU</div>
          <div class="kpi-value" id="dSku">–</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">Economic Order Quantity (EOQ)</div>
          <div class="kpi-value" id="dEoq">–</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">Reorder Point (ROP)</div>
          <div class="kpi-value" id="dRop">–</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">Safety Stock</div>
          <div class="kpi-value" id="dSs">–</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">Risk level (stockout vs. inventory cost)</div>
          <div class="kpi-value" id="dRisk">–</div>
          <span id="riskTag" class="tag"></span>
        </div>
        <p class="note">
          EOQ is calculated as <em>√((2 × D × OrderCost) / (UnitCost × Hold%))</em>.
          ROP combines demand during lead time; safety stock covers variability using service level (Z-value).
        </p>
      </section>
    </div>
  </div>

  <script>
    // Sample SKUs for the portfolio
    const skus = [
      {
        id: "OR-IC-001",
        name: "Temp sensor microchip v2",
        annualDemand: 12000,
        unitCost: 4.5,
        orderCost: 180,
        holdingRate: 0.25,
        leadTime: 12,
        stdDaily: 6,
        serviceZ: 1.65
      },
      {
        id: "OR-CTRL-014",
        name: "Motor controller 48V",
        annualDemand: 8000,
        unitCost: 18,
        orderCost: 220,
        holdingRate: 0.24,
        leadTime: 15,
        stdDaily: 9,
        serviceZ: 1.65
      },
      {
        id: "OR-BATT-008",
        name: "Lithium battery pack 12V",
        annualDemand: 5000,
        unitCost: 32,
        orderCost: 260,
        holdingRate: 0.27,
        leadTime: 20,
        stdDaily: 7,
        serviceZ: 2.33
      },
      {
        id: "OR-CBL-032",
        name: "High-precision cable kit",
        annualDemand: 18000,
        unitCost: 2.2,
        orderCost: 140,
        holdingRate: 0.22,
        leadTime: 10,
        stdDaily: 4,
        serviceZ: 1.28
      }
    ];

    const selectEl = document.getElementById("skuSelect");
    const tbody = document.getElementById("skuTableBody");

    function populateTable() {
      skus.forEach((sku, index) => {
        // Dropdown
        const opt = document.createElement("option");
        opt.value = sku.id;
        opt.textContent = `${sku.id} – ${sku.name}`;
        if (index === 0) opt.selected = true;
        selectEl.appendChild(opt);

        // Table
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${sku.id}</td>
          <td>${sku.name}</td>
          <td>${sku.annualDemand.toLocaleString()}</td>
          <td>€${sku.unitCost.toFixed(2)}</td>
          <td>€${sku.orderCost.toFixed(0)}</td>
          <td>${(sku.holdingRate * 100).toFixed(0)}%</td>
          <td>${sku.leadTime}</td>
          <td>${sku.stdDaily}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    function calculatePolicy(sku) {
      const D = sku.annualDemand;
      const S = sku.orderCost;
      const H = sku.unitCost * sku.holdingRate;

      const EOQ = Math.sqrt((2 * D * S) / H);
      const dailyDemand = D / 365;
      const ROP = dailyDemand * sku.leadTime;
      const SS = sku.serviceZ * Math.sqrt(sku.leadTime * Math.pow(sku.stdDaily, 2));

      // Simple risk logic: too low SS / too high EOQ flagged as risk
      let riskLabel = "Balanced";
      let riskClass = "green";
      if (SS < dailyDemand * 2) {
        riskLabel = "High stockout risk";
        riskClass = "red";
      } else if (EOQ > D / 6) {
        riskLabel = "High inventory cost risk";
        riskClass = "yellow";
      }

      document.getElementById("dSku").textContent = `${sku.id} – ${sku.name}`;
      document.getElementById("dEoq").textContent = `${EOQ.toFixed(0)} units`;
      document.getElementById("dRop").textContent = `${ROP.toFixed(0)} units`;
      document.getElementById("dSs").textContent = `${SS.toFixed(0)} units`;
      document.getElementById("dRisk").textContent = riskLabel;

      const riskTag = document.getElementById("riskTag");
      riskTag.textContent = riskLabel;
      riskTag.className = "tag " + riskClass;
    }

    function onSkuChange() {
      const id = selectEl.value;
      const sku = skus.find(s => s.id === id);
      if (sku) calculatePolicy(sku);
    }

    // Init
    populateTable();
    onSkuChange();
    selectEl.addEventListener("change", onSkuChange);
  </script>
</body>
</html>
