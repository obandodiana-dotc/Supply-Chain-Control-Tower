<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SupplyChain Intelligence · Dashboard</title>

<!-- ===== STYLE ===== -->
<style>
  :root {
    --bg: #0a0f1c;
    --card: #131b2f;
    --soft: #1c2640;
    --accent: #38bdf8;
    --accent2: #34d399;
    --warn: #facc15;
    --danger: #fb7185;
    --text: #e2e8f0;
    --text-soft: #94a3b8;
    --radius: 18px;
    --radius-sm: 10px;
    --font: system-ui, sans-serif;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; font-family: var(--font); }

  body {
    background: var(--bg);
    color: var(--text);
    padding-bottom: 50px;
  }

  /* NAVIGATION BAR */
  nav {
    width: 100%;
    background: var(--card);
    padding: 14px;
    display: flex;
    justify-content: center;
    gap: 22px;
    position: sticky;
    top: 0;
    z-index: 99;
    border-bottom: 1px solid #1e293b;
  }
  nav a {
    color: var(--text-soft);
    text-decoration: none;
    font-weight: 500;
    transition: 0.2s;
  }
  nav a:hover {
    color: var(--accent);
  }

  .container {
    max-width: 960px;
    margin: auto;
    padding: 20px;
  }

  h1 {
    text-align: center;
    font-size: 32px;
    margin-bottom: 8px;
    background: linear-gradient(to right, #38bdf8, #a855f7, #f97316);
    -webkit-background-clip: text;
    color: transparent;
  }

  .subtitle {
    text-align: center;
    font-size: 14px;
    color: var(--text-soft);
    margin-bottom: 20px;
  }

  .card {
    background: var(--card);
    padding: 16px;
    border-radius: var(--radius);
    border: 1px solid #1e293b;
    margin-top: 26px;
  }

  .card-title {
    font-size: 18px;
    margin-bottom: 12px;
  }

  .grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
  }

  @media(max-width: 700px) {
    .grid-2 { grid-template-columns: 1fr; }
  }

  .kpi {
    background: var(--soft);
    padding: 14px;
    border-radius: var(--radius-sm);
    border: 1px solid #24314d;
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .kpi-label {
    font-size: 12px;
    color: var(--text-soft);
  }

  .kpi-value {
    font-size: 24px;
    font-weight: 700;
  }

  .tag {
    width: fit-content;
    padding: 3px 8px;
    border-radius: 999px;
    font-size: 10px;
  }
  .green { background: rgba(34,197,94,0.15); color: #bbf7d0; }
  .yellow { background: rgba(250,204,21,0.15); color: #fef9c3; }
  .red { background: rgba(248,113,113,0.15); color: #fee2e2; }

</style>
</head>

<body>

<!-- ===== NAVIGATION ===== -->
<nav>
  <a href="index.html">Dashboard</a>
  <a href="inventory.html">Inventory</a>
  <a href="map.html">Network Map</a>
  <a href="simulation.html">Simulation</a>
  <a href="risk.html">Risk</a>
  <a href="abc.html">ABC</a>
</nav>

<!-- ===== PAGE CONTENT ===== -->
<div class="container">

  <h1>SupplyChain Intelligence</h1>
  <p class="subtitle">End-to-end analytics across inventory, risk and network operations</p>

  <!-- GLOBAL KPIs -->
  <div class="card">
    <div class="card-title">Global Performance Indicators</div>

    <div class="grid-2" id="kpiSection">
      <!-- KPIs generated by JS -->
    </div>
  </div>

  <!-- PORTFOLIO SUMMARY -->
  <div class="card">
    <div class="card-title">Portfolio Summary</div>
    <p id="portfolioSummary" style="color:var(--text-soft); font-size:14px;"></p>
  </div>

  <!-- NETWORK STATUS -->
  <div class="card">
    <div class="card-title">Network Risk Status</div>
    <p id="networkRisk" style="color:var(--text-soft); font-size:14px;"></p>
  </div>

</div>

<!-- ===== JAVASCRIPT ===== -->
<script src="data.js"></script>

<script>
/* =======================================
   GLOBAL DASHBOARD LOGIC
   ======================================= */

function calculateDashboard() {

  /* --- SKU KPIs --- */
  const totalSKUs = SKUs.length;

  const totalDemand = SKUs.reduce((sum, s) => sum + s.demandAnnual, 0);

  const avgUnitCost = (
    SKUs.reduce((sum, s) => sum + s.unitCost, 0) / totalSKUs
  ).toFixed(2);

  /* Fake fill rate for demonstration (still realistic) */
  const fillRate = (94 + Math.random() * 4).toFixed(1);

  /* Fake inventory cost index */
  const invCostIndex = (1.3 + Math.random() * 0.5).toFixed(2);

  /* Risk from nodes */
  const networkRiskScore =
    (NetworkNodes.supplier.risk +
     NetworkNodes.factory.risk +
     NetworkNodes.dc.risk +
     NetworkNodes.store.risk) / 4;

  let riskLabel = "";
  let riskTag = "";

  if (networkRiskScore < 0.30) {
    riskLabel = "LOW";
    riskTag = "green";
  } else if (networkRiskScore < 0.50) {
    riskLabel = "MEDIUM";
    riskTag = "yellow";
  } else {
    riskLabel = "HIGH";
    riskTag = "red";
  }

  /* --- Render KPIs --- */
  document.getElementById("kpiSection").innerHTML = `
    <div class="kpi">
      <div class="kpi-label">Total SKUs</div>
      <div class="kpi-value">${totalSKUs}</div>
      <div class="tag green">Active portfolio</div>
    </div>

    <div class="kpi">
      <div class="kpi-label">Total Annual Demand</div>
      <div class="kpi-value">${totalDemand.toLocaleString()}</div>
      <div class="tag green">Healthy turnover</div>
    </div>

    <div class="kpi">
      <div class="kpi-label">Avg Fill Rate</div>
      <div class="kpi-value">${fillRate}%</div>
      <div class="tag ${fillRate > 95 ? "green" : "yellow"}">Estimated</div>
    </div>

    <div class="kpi">
      <div class="kpi-label">Inventory Cost (€/unit)</div>
      <div class="kpi-value">${invCostIndex}</div>
      <div class="tag ${invCostIndex < 1.5 ? "green" : "red"}">Cost index</div>
    </div>
  `;

  /* Portfolio Summary */
  document.getElementById("portfolioSummary").innerHTML = `
    The current portfolio contains <strong>${totalSKUs}</strong> active SKUs
    across multiple categories with a combined annual demand of
    <strong>${totalDemand.toLocaleString()}</strong> units.
    The average unit cost is €${avgUnitCost}, indicating a mixed portfolio of
    low-cost mechanical components and higher-value electronics.
  `;

  /* Network Status Summary */
  document.getElementById("networkRisk").innerHTML = `
    The overall network risk is classified as
    <span class="tag ${riskTag}" style="margin-left:6px;">${riskLabel}</span>.
    This score is derived from supplier reliability, factory capacity,
    distribution center performance, and retail variability.
  `;
}

/* --- Initialize Dashboard --- */
calculateDashboard();
</script>

</body>
</html>
